[gd_scene load_steps=20 format=3 uid="uid://cx7ph4f4py1r2"]

[ext_resource type="PackedScene" uid="uid://4uc4euv1tilh" path="res://source/glb/headlessChicken.glb" id="1_kg3no"]
[ext_resource type="Script" uid="uid://7i2x3ia41kmf" path="res://scripts/player/playerGd.gd" id="2_1vbol"]
[ext_resource type="AnimationLibrary" uid="uid://cumk1xttfpkah" path="res://source/glb/charAnim.glb" id="2_xn1bx"]
[ext_resource type="PackedScene" uid="uid://4pd2vbkd5axb" path="res://scenes/particle/fire_white.tscn" id="3_1vbol"]
[ext_resource type="Script" uid="uid://c7yv1ayxievc5" path="res://scripts/player/spring_arm_3d.gd" id="4_jip51"]

[sub_resource type="AnimationNodeBlend2" id="AnimationNodeBlend2_jip51"]

[sub_resource type="AnimationNodeTimeScale" id="AnimationNodeTimeScale_jip51"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_jip51"]
animation = &"charAnim/walkBackwards"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_p4sl1"]
animation = &"charAnim/walkForward"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_6qntj"]
animation = &"charAnim/walkStrafeRight"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_psck7"]
animation = &"charAnim/walkStrafeLeft"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_8fe0o"]
animation = &"charAnim/charIdle"

[sub_resource type="AnimationNodeBlendSpace2D" id="AnimationNodeBlendSpace2D_btlm8"]
blend_point_0/node = SubResource("AnimationNodeAnimation_jip51")
blend_point_0/pos = Vector2(-1, 0)
blend_point_1/node = SubResource("AnimationNodeAnimation_p4sl1")
blend_point_1/pos = Vector2(1, 0)
blend_point_2/node = SubResource("AnimationNodeAnimation_6qntj")
blend_point_2/pos = Vector2(0, -1)
blend_point_3/node = SubResource("AnimationNodeAnimation_psck7")
blend_point_3/pos = Vector2(0, 1)
blend_point_4/node = SubResource("AnimationNodeAnimation_8fe0o")
blend_point_4/pos = Vector2(0, 0)

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_ho3jx"]
animation = &"charAnim/runWithSword"

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_ho3jx"]
graph_offset = Vector2(-496.47705, 133.46744)
nodes/output/position = Vector2(520, 180)
nodes/Speed/node = SubResource("AnimationNodeTimeScale_jip51")
nodes/Speed/position = Vector2(-240, 220)
nodes/WalkBlend/node = SubResource("AnimationNodeBlendSpace2D_btlm8")
nodes/WalkBlend/position = Vector2(-460, 220)
nodes/RunBlend/node = SubResource("AnimationNodeBlend2_jip51")
nodes/RunBlend/position = Vector2(-20, 260)
nodes/run/node = SubResource("AnimationNodeAnimation_ho3jx")
nodes/run/position = Vector2(-340, 440)
node_connections = [&"output", 0, &"RunBlend", &"Speed", 0, &"WalkBlend", &"RunBlend", 0, &"Speed", &"RunBlend", 1, &"run"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_jip51"]

[sub_resource type="SphereShape3D" id="SphereShape3D_p4sl1"]

[sub_resource type="BoxMesh" id="BoxMesh_ho3jx"]

[sub_resource type="BoxMesh" id="BoxMesh_6qntj"]

[node name="headlessChicken" instance=ExtResource("1_kg3no")]
collision_mask = 14
script = ExtResource("2_1vbol")

[node name="Armature" parent="." index="0"]
unique_name_in_owner = true
transform = Transform3D(-1, 0, -8.742278e-08, 0, 1, 0, 8.742278e-08, 0, -1, 0, 0, 0)

[node name="Skeleton3D" parent="Armature" index="0"]
bones/0/position = Vector3(0.024905156, 0.8421122, -0.0074048266)
bones/0/rotation = Quaternion(0.27966473, -0.40308756, 0.14224552, 0.85969424)
bones/2/rotation = Quaternion(-0.054199796, 0.021789143, -0.03989717, 0.9974949)
bones/3/rotation = Quaternion(-0.078122996, 0.07788676, -0.03031241, 0.9934343)
bones/4/rotation = Quaternion(0.2479915, 0.03545722, -0.014847643, 0.96799934)
bones/5/rotation = Quaternion(-0.093994826, 0.104842275, -0.010051408, 0.9899859)
bones/6/rotation = Quaternion(-0.07597995, -0.07069321, -0.010022032, 0.9945497)
bones/7/position = Vector3(0.017295126, 0.12986128, 0.07400655)
bones/7/rotation = Quaternion(-0.5051361, -0.46753177, -0.41487694, 0.5950871)
bones/8/position = Vector3(0.014143575, 0.18760002, -0.013976592)
bones/8/rotation = Quaternion(-0.24007398, 0.60410386, -0.45382655, 0.60947895)
bones/8/scale = Vector3(1.0051789, 0.98972213, 1.005179)
bones/9/rotation = Quaternion(0.18393095, 0.16014823, -0.030008951, 0.9693408)
bones/9/scale = Vector3(1.0000284, 0.9979105, 1.002122)
bones/10/rotation = Quaternion(0.018473726, -0.28599522, 0.056737434, 0.95637155)
bones/10/scale = Vector3(0.99496514, 1.0102054, 0.99491304)
bones/11/rotation = Quaternion(0.08373827, 0.6706233, -0.031920135, 0.7363651)
bones/11/scale = Vector3(0.99999994, 0.99999964, 0.9999998)
bones/12/rotation = Quaternion(0.0538901, -0.22938706, -0.02131405, 0.97160864)
bones/12/scale = Vector3(1.0000001, 0.99999976, 0.99999994)
bones/13/rotation = Quaternion(0.043827396, 0.00012431257, -0.030384945, 0.998577)
bones/14/rotation = Quaternion(0.06624894, 0.6489818, -0.15143894, 0.7426305)
bones/15/rotation = Quaternion(0.1190103, -0.20056237, -0.050462227, 0.97111535)
bones/16/rotation = Quaternion(0.05198943, -0.025702938, -0.020914434, 0.9980977)
bones/17/rotation = Quaternion(0.26729733, 0.7841643, -0.24720201, 0.50252336)
bones/17/scale = Vector3(0.99999994, 0.999996, 1.0000001)
bones/18/rotation = Quaternion(0.15975621, 0.08773428, 0.07709074, 0.98022336)
bones/18/scale = Vector3(0.9999999, 1.0000111, 1.0000001)
bones/19/rotation = Quaternion(0.06944345, -0.08872341, 0.048953846, 0.992426)
bones/19/scale = Vector3(0.99999994, 0.9999914, 0.9999996)
bones/20/rotation = Quaternion(0.12586695, 0.71148294, -0.23412846, 0.6504871)
bones/20/scale = Vector3(1.0000001, 1.000001, 0.9999999)
bones/21/rotation = Quaternion(0.184654, -0.10326848, -0.018870408, 0.97718096)
bones/21/scale = Vector3(1.0000001, 0.9999957, 1.0000001)
bones/22/rotation = Quaternion(0.120098084, -0.083996356, 0.0066358503, 0.98917997)
bones/23/rotation = Quaternion(0.24227741, 0.9361698, 0.25058788, -0.045753725)
bones/24/rotation = Quaternion(0.09407212, -0.18748778, 0.003248903, 0.9777466)
bones/24/scale = Vector3(0.9999998, 0.99999726, 0.99999976)
bones/25/rotation = Quaternion(0.10909107, 0.09436688, -0.084188074, 0.98595464)
bones/25/scale = Vector3(0.9999998, 1.0000007, 0.9999999)
bones/30/position = Vector3(-0.017304951, 0.12986106, 0.07400658)
bones/30/rotation = Quaternion(-0.46047118, 0.5553917, 0.4082465, 0.55932206)
bones/31/position = Vector3(-0.014143478, 0.18760006, -0.013976307)
bones/31/rotation = Quaternion(-0.43486637, -0.68010694, 0.33953238, 0.48276672)
bones/31/scale = Vector3(1.0126634, 0.9751469, 1.0126631)
bones/32/rotation = Quaternion(0.3810312, 0.019443976, -0.00795627, 0.92432356)
bones/32/scale = Vector3(1.0000857, 0.981693, 1.0192794)
bones/33/rotation = Quaternion(0.21992676, 0.17875484, 0.07276359, 0.9562346)
bones/33/scale = Vector3(0.9892673, 1.0179393, 0.9935151)
bones/34/rotation = Quaternion(0.22216827, -0.6429106, 0.23438361, 0.6945298)
bones/35/rotation = Quaternion(0.50945586, 0.10612238, 0.24670234, 0.817515)
bones/35/scale = Vector3(1.0000004, 0.999997, 1.0000011)
bones/36/rotation = Quaternion(0.0438267, -0.00012435246, 0.030386273, 0.998577)
bones/36/scale = Vector3(1, 1.0000026, 0.99999994)
bones/37/rotation = Quaternion(0.24187402, -0.6078903, 0.29796487, 0.69511384)
bones/37/scale = Vector3(0.9999997, 0.99999964, 1.0000001)
bones/38/rotation = Quaternion(0.51449364, 0.16614842, 0.22729744, 0.8099549)
bones/38/scale = Vector3(1.0000001, 0.9999967, 1.0000004)
bones/39/rotation = Quaternion(0.051989555, 0.025702963, 0.020915013, 0.9980977)
bones/39/scale = Vector3(1, 1.0000035, 0.99999994)
bones/40/rotation = Quaternion(-0.3212578, 0.76835525, -0.24933678, -0.49422157)
bones/40/scale = Vector3(1.0000002, 0.9999965, 1)
bones/41/rotation = Quaternion(0.3290042, 0.0008629281, -0.20507336, 0.92179203)
bones/41/scale = Vector3(1.0000006, 1.0000057, 1.0000012)
bones/42/rotation = Quaternion(0.06944434, 0.088723585, -0.048951887, 0.99242604)
bones/42/scale = Vector3(0.99999994, 0.9999952, 0.9999997)
bones/43/rotation = Quaternion(0.36826047, -0.641128, 0.3237374, 0.5903671)
bones/44/rotation = Quaternion(0.40635744, 0.130717, 0.022878276, 0.9040262)
bones/44/scale = Vector3(1.0000001, 0.99999934, 1.0000004)
bones/45/rotation = Quaternion(0.120099515, 0.08399618, -0.006638001, 0.9891798)
bones/45/scale = Vector3(0.9999997, 1.0000011, 0.99999994)
bones/47/rotation = Quaternion(-0.057067916, -0.5547011, -0.45070738, 0.69707453)
bones/48/rotation = Quaternion(0.16092706, -0.09684531, 0.050119784, 0.9809238)
bones/48/scale = Vector3(0.9999997, 0.9999999, 1)
bones/49/rotation = Quaternion(0.110602155, -0.09357978, 0.08219021, 0.98602986)
bones/49/scale = Vector3(1, 0.99999964, 1)
bones/53/position = Vector3(0.112012126, -0.004556514, -0.040445257)
bones/53/rotation = Quaternion(1.6910906e-08, 0.6969362, 0.71713316, 9.159548e-08)
bones/54/position = Vector3(-0.112022, -0.004556677, -0.040445272)
bones/54/rotation = Quaternion(1.6910906e-08, 0.6969362, 0.71713316, 9.159548e-08)
bones/55/rotation = Quaternion(0.18472639, 0.78956544, 0.32215592, -0.48854688)
bones/57/position = Vector3(0.123937055, -0.01954541, 0.05951976)
bones/57/rotation = Quaternion(0.8163877, 0.34771293, 0.011502036, 0.46094975)
bones/57/scale = Vector3(1.0121262, 0.9761824, 1.012126)
bones/58/rotation = Quaternion(0.30548403, -0.40706632, 0.14434443, 0.84861135)
bones/58/scale = Vector3(0.99895155, 0.9878183, 1.0140338)
bones/59/rotation = Quaternion(-0.50525314, 0.017801495, 0.14279394, 0.85088915)
bones/59/scale = Vector3(0.9910625, 0.99521464, 1.014312)
bones/60/rotation = Quaternion(-7.10975e-05, 0.97446823, -0.2245253, -0.00047803312)
bones/60/scale = Vector3(0.9998186, 1.0002589, 0.9999227)
bones/61/position = Vector3(-0.11238221, -0.032614958, 0.052133232)
bones/61/rotation = Quaternion(0.8605954, -0.25591597, -0.03680698, 0.43877992)
bones/61/scale = Vector3(1.0138826, 0.97280324, 1.0138825)
bones/62/rotation = Quaternion(0.38500687, 0.101988815, -0.04249638, 0.9162763)
bones/62/scale = Vector3(0.998798, 0.9819104, 1.020518)
bones/63/rotation = Quaternion(-0.68609977, 0.112556376, -0.17384006, 0.6974079)
bones/63/scale = Vector3(0.9937113, 0.98716116, 1.0198036)
bones/64/rotation = Quaternion(-0.00012942747, 0.97445977, -0.22456165, -0.00046559196)
bones/64/scale = Vector3(0.9998932, 1.000152, 0.9999545)

[node name="BoneAttachment3D" type="BoneAttachment3D" parent="Armature/Skeleton3D" index="0"]
transform = Transform3D(0.9264264, -0.20998134, -0.31247646, 0.04121823, 0.88158804, -0.47021598, 0.37421256, 0.4227408, 0.82538176, -0.13183689, 1.4309783, 0.17087811)
bone_name = "DEF-spine.005"
bone_idx = 5

[node name="Fire_white" parent="Armature/Skeleton3D/BoneAttachment3D" index="0" instance=ExtResource("3_1vbol")]
transform = Transform3D(0.9968041, 0.026470788, 0.07537454, -0.04138431, 0.9781408, 0.20378529, -0.06833245, -0.2062529, 0.9761105, 0.014351491, 0.07728994, -0.029583871)

[node name="BoneAttachment3D2" type="BoneAttachment3D" parent="Armature/Skeleton3D" index="1"]
transform = Transform3D(-0.69763225, -0.6780108, -0.25674382, 0.35901624, -0.6126193, 0.6870618, -0.6164031, 0.44513094, 0.66303885, -0.5962651, 0.93654746, -0.1347293)
bone_name = "DEF-hand.R"
bone_idx = 33

[node name="HandPivot" type="Node3D" parent="Armature/Skeleton3D/BoneAttachment3D2" index="0"]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, -4.371139e-08, 1, 0, -1, -4.371139e-08, 1.0856906, 0.89481294, 0)

[node name="AnimationPlayer" type="AnimationPlayer" parent="." index="1"]
unique_name_in_owner = true
libraries = {
&"charAnim": ExtResource("2_xn1bx")
}

[node name="AnimationTree" type="AnimationTree" parent="." index="2"]
unique_name_in_owner = true
root_node = NodePath("%AnimationTree/..")
tree_root = SubResource("AnimationNodeBlendTree_ho3jx")
anim_player = NodePath("../AnimationPlayer")
parameters/Speed/scale = 1.0
parameters/WalkBlend/blend_position = Vector2(0, 0)
parameters/RunBlend/blend_amount = 0.0

[node name="CollisionWorld" type="CollisionShape3D" parent="." index="3"]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
shape = SubResource("CapsuleShape3D_jip51")

[node name="SpringArm3D" type="SpringArm3D" parent="." index="4"]
unique_name_in_owner = true
transform = Transform3D(0.99999994, 0, 0, 0, 1, 0, 0, 0, 0.99999994, 0, 1.2582402, -0.20610142)
collision_mask = 4
shape = SubResource("SphereShape3D_p4sl1")
spring_length = 5.0
script = ExtResource("4_jip51")

[node name="Camera3D" type="Camera3D" parent="SpringArm3D" index="0"]

[node name="StairBelowRayCast3D" type="RayCast3D" parent="." index="5"]
unique_name_in_owner = true
target_position = Vector3(0, -0.75, 0)
collision_mask = 4

[node name="MeshInstance3D" type="MeshInstance3D" parent="StairBelowRayCast3D" index="0"]
transform = Transform3D(0.1, 0, 0, 0, 0.1, 0, 0, 0, 0.1, 0, -0.75, 0)
mesh = SubResource("BoxMesh_ho3jx")

[node name="StairAheadRayCast3D" type="RayCast3D" parent="." index="6"]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.55, -0.76322514)
target_position = Vector3(0, -0.55, 0)
collision_mask = 4

[node name="MeshInstance3D" type="MeshInstance3D" parent="StairAheadRayCast3D" index="0"]
transform = Transform3D(0.1, 0, 0, 0, 0.1, 0, 0, 0, 0.1, 0, 0, 0)
mesh = SubResource("BoxMesh_6qntj")
