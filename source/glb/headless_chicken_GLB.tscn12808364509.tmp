[gd_scene load_steps=39 format=3 uid="uid://cx7ph4f4py1r2"]

[ext_resource type="PackedScene" uid="uid://4uc4euv1tilh" path="res://source/glb/headlessChicken.glb" id="1_kg3no"]
[ext_resource type="Script" uid="uid://7i2x3ia41kmf" path="res://scripts/player/playerGd.gd" id="2_1vbol"]
[ext_resource type="PackedScene" uid="uid://4pd2vbkd5axb" path="res://scenes/particle/fire_white.tscn" id="3_1vbol"]
[ext_resource type="Script" uid="uid://c7yv1ayxievc5" path="res://scripts/player/spring_arm_3d.gd" id="4_jip51"]
[ext_resource type="Animation" uid="uid://c765j2relgyl4" path="res://animations/charIdle.res" id="4_mx27v"]
[ext_resource type="Animation" uid="uid://d2ytqy4nq8y5v" path="res://animations/default.res" id="5_jfjv5"]
[ext_resource type="Animation" uid="uid://c8yc21i8ecljc" path="res://animations/runWIthSword.res" id="6_xbv8m"]
[ext_resource type="Animation" uid="uid://l0itidcisab6" path="res://animations/sheathSword.res" id="7_admug"]
[ext_resource type="Animation" uid="uid://dqw7tjqs3u8rr" path="res://animations/swordInwardSlash.res" id="8_4bcik"]
[ext_resource type="Animation" uid="uid://0bd7jd3k1caw" path="res://animations/swordOutwardSlash.res" id="9_jjj4c"]
[ext_resource type="Animation" uid="uid://btml7jh0ryelj" path="res://animations/walkBackwards.res" id="10_gfhmo"]
[ext_resource type="Animation" uid="uid://bj7e84uckkfre" path="res://animations/walkForward.res" id="11_nju7f"]
[ext_resource type="Animation" uid="uid://dbb0duny13eh8" path="res://animations/walkStrafeLeft.res" id="12_873gh"]
[ext_resource type="Animation" uid="uid://cq5riawjiutjc" path="res://animations/walkStrafeRight.res" id="13_jhxjg"]
[ext_resource type="Animation" uid="uid://jibouuradr4v" path="res://animations/withdrawSword.res" id="14_xdxf0"]

[sub_resource type="AnimationLibrary" id="AnimationLibrary_l7pr1"]
_data = {
&"charIdle": ExtResource("4_mx27v"),
&"default": ExtResource("5_jfjv5"),
&"runWIthSword": ExtResource("6_xbv8m"),
&"sheathSword": ExtResource("7_admug"),
&"swordInwardSlash": ExtResource("8_4bcik"),
&"swordOutwardSlash": ExtResource("9_jjj4c"),
&"walkBackwards": ExtResource("10_gfhmo"),
&"walkForward": ExtResource("11_nju7f"),
&"walkStrafeLeft": ExtResource("12_873gh"),
&"walkStrafeRight": ExtResource("13_jhxjg"),
&"withdrawSword": ExtResource("14_xdxf0")
}

[sub_resource type="AnimationNodeBlend2" id="AnimationNodeBlend2_mx27v"]

[sub_resource type="AnimationNodeBlend2" id="AnimationNodeBlend2_jip51"]

[sub_resource type="AnimationNodeTimeScale" id="AnimationNodeTimeScale_jip51"]

[sub_resource type="AnimationNodeBlend2" id="AnimationNodeBlend2_wle02"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_jip51"]
animation = &"charAnim/walkBackwards"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_p4sl1"]
animation = &"charAnim/walkForward"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_6qntj"]
animation = &"charAnim/walkStrafeRight"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_psck7"]
animation = &"charAnim/walkStrafeLeft"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_8fe0o"]
animation = &"charAnim/charIdle"

[sub_resource type="AnimationNodeBlendSpace2D" id="AnimationNodeBlendSpace2D_btlm8"]
blend_point_0/node = SubResource("AnimationNodeAnimation_jip51")
blend_point_0/pos = Vector2(-1, 0)
blend_point_1/node = SubResource("AnimationNodeAnimation_p4sl1")
blend_point_1/pos = Vector2(1, 0)
blend_point_2/node = SubResource("AnimationNodeAnimation_6qntj")
blend_point_2/pos = Vector2(0, -1)
blend_point_3/node = SubResource("AnimationNodeAnimation_psck7")
blend_point_3/pos = Vector2(0, 1)
blend_point_4/node = SubResource("AnimationNodeAnimation_8fe0o")
blend_point_4/pos = Vector2(0, 0)

[sub_resource type="AnimationNodeBlend2" id="AnimationNodeBlend2_jfjv5"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_mx27v"]
animation = &"charAnim/default"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_xbv8m"]
animation = &"charAnim/default"

[sub_resource type="AnimationNodeTimeSeek" id="AnimationNodeTimeSeek_mx27v"]

[sub_resource type="AnimationNodeTimeSeek" id="AnimationNodeTimeSeek_jfjv5"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_ho3jx"]
animation = &"charAnim/runWIthSword"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_admug"]
animation = &"charAnim/sheathSword"

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_ho3jx"]
graph_offset = Vector2(-498.12207, 287.30255)
nodes/output/position = Vector2(820, 180)
nodes/Speed/node = SubResource("AnimationNodeTimeScale_jip51")
nodes/Speed/position = Vector2(-240, 220)
nodes/WalkBlend/node = SubResource("AnimationNodeBlendSpace2D_btlm8")
nodes/WalkBlend/position = Vector2(-460, 220)
nodes/RunBlend/node = SubResource("AnimationNodeBlend2_jip51")
nodes/RunBlend/position = Vector2(-20, 260)
nodes/run/node = SubResource("AnimationNodeAnimation_ho3jx")
nodes/run/position = Vector2(-340, 440)
nodes/StartAttack/node = SubResource("AnimationNodeBlend2_wle02")
nodes/StartAttack/position = Vector2(640, 240)
nodes/attackTimed1/node = SubResource("AnimationNodeTimeSeek_mx27v")
nodes/attackTimed1/position = Vector2(120, 660)
nodes/attack1/node = SubResource("AnimationNodeAnimation_mx27v")
nodes/attack1/position = Vector2(-160, 720)
nodes/attack2/node = SubResource("AnimationNodeAnimation_xbv8m")
nodes/attack2/position = Vector2(-160, 880)
nodes/attackTimed2/node = SubResource("AnimationNodeTimeSeek_jfjv5")
nodes/attackTimed2/position = Vector2(120, 840)
nodes/ComboBlend/node = SubResource("AnimationNodeBlend2_mx27v")
nodes/ComboBlend/position = Vector2(300, 660)
nodes/WeaponBlend/node = SubResource("AnimationNodeBlend2_jfjv5")
nodes/WeaponBlend/position = Vector2(220, 260)
nodes/weaponEquip/node = SubResource("AnimationNodeAnimation_admug")
nodes/weaponEquip/position = Vector2(-20, 500)
node_connections = [&"output", 0, &"StartAttack", &"Speed", 0, &"WalkBlend", &"RunBlend", 0, &"Speed", &"RunBlend", 1, &"run", &"StartAttack", 0, &"WeaponBlend", &"StartAttack", 1, &"ComboBlend", &"attackTimed1", 0, &"attack1", &"attackTimed2", 0, &"attack2", &"ComboBlend", 0, &"attackTimed2", &"ComboBlend", 1, &"attackTimed1", &"WeaponBlend", 0, &"RunBlend", &"WeaponBlend", 1, &"weaponEquip"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_jip51"]

[sub_resource type="SphereShape3D" id="SphereShape3D_p4sl1"]

[sub_resource type="BoxMesh" id="BoxMesh_ho3jx"]

[sub_resource type="BoxMesh" id="BoxMesh_6qntj"]

[node name="headlessChicken" instance=ExtResource("1_kg3no")]
collision_mask = 14
script = ExtResource("2_1vbol")
equipment = ["res://scenes/weapon/Sword.tscn", null, null]

[node name="Armature" parent="." index="0"]
unique_name_in_owner = true
transform = Transform3D(-1, 0, -1.509958e-07, 0, 1, 0, 1.509958e-07, 0, -1, 0, 0, 0)

[node name="Skeleton3D" parent="Armature" index="0"]
bones/0/position = Vector3(0.019451616, 0.83614725, -0.023131639)
bones/0/rotation = Quaternion(0.13031065, -0.32659182, 0.043941252, 0.9351076)
bones/2/rotation = Quaternion(0.06510956, 0.0037711768, 0.0049782363, 0.99785864)
bones/3/rotation = Quaternion(0.15671931, 0.009391811, 0.0059008705, 0.9875809)
bones/4/rotation = Quaternion(0.08535168, 0.124457404, -0.07437695, 0.98574513)
bones/5/rotation = Quaternion(-0.095329575, 0.13524203, -0.013335198, 0.98612577)
bones/6/rotation = Quaternion(-0.124044105, -0.012711344, -0.025091277, 0.99187803)
bones/7/position = Vector3(0.017301107, 0.12985802, 0.07397941)
bones/7/rotation = Quaternion(-0.4386667, -0.51853985, -0.39181182, 0.62062186)
bones/8/position = Vector3(0.014143347, 0.18760012, -0.013976312)
bones/8/rotation = Quaternion(-0.29080296, 0.4633304, -0.6403227, 0.5392083)
bones/8/scale = Vector3(1.0202831, 0.960637, 1.0202826)
bones/9/rotation = Quaternion(0.20306164, 0.036657203, -0.0072854166, 0.97845244)
bones/9/scale = Vector3(1.0000355, 0.9909214, 1.010101)
bones/10/rotation = Quaternion(0.048708335, -0.33826852, -0.0018813445, 0.93978643)
bones/10/scale = Vector3(0.98016006, 1.0404906, 0.98060477)
bones/11/rotation = Quaternion(0.19695951, 0.65936756, -0.07747627, 0.7214145)
bones/11/scale = Vector3(0.9999998, 0.99999416, 1.0000002)
bones/12/rotation = Quaternion(0.12692435, -0.24987657, -0.069083355, 0.9574338)
bones/12/scale = Vector3(1.0000002, 1.0000103, 1.0000002)
bones/13/rotation = Quaternion(0.043829627, 0.00012448436, -0.030383734, 0.9985769)
bones/14/rotation = Quaternion(0.09206824, 0.6540596, -0.074215196, 0.7471423)
bones/15/rotation = Quaternion(0.45191365, -0.19225718, -0.27817822, 0.8254867)
bones/16/rotation = Quaternion(0.051989436, -0.025702545, -0.020908607, 0.9980979)
bones/17/rotation = Quaternion(0.18408339, 0.82052875, -0.18255882, 0.50942934)
bones/17/scale = Vector3(0.99999976, 1.0000026, 1)
bones/18/rotation = Quaternion(0.64062047, 0.057324275, 0.22553846, 0.7317457)
bones/18/scale = Vector3(0.99999964, 1.0000148, 0.9999977)
bones/19/rotation = Quaternion(0.06944113, -0.08872337, 0.048953637, 0.9924262)
bones/19/scale = Vector3(0.9999998, 0.9999855, 0.99999976)
bones/20/rotation = Quaternion(0.11812155, 0.72387195, -0.17226605, 0.657557)
bones/20/scale = Vector3(1.0000001, 1.0000021, 1)
bones/21/rotation = Quaternion(0.6624153, -0.08680317, -0.14991191, 0.7288331)
bones/21/scale = Vector3(1.0000001, 0.99999523, 0.9999983)
bones/22/rotation = Quaternion(0.12009521, -0.08399636, 0.0066360277, 0.9891803)
bones/23/rotation = Quaternion(0.19129668, 0.9399854, 0.28152713, -0.023992924)
bones/24/rotation = Quaternion(0.13650398, -0.31219184, -0.050241172, 0.9388178)
bones/24/scale = Vector3(0.99999946, 1.0000027, 0.99999964)
bones/25/rotation = Quaternion(0.109091535, 0.094367, -0.0841871, 0.98595464)
bones/25/scale = Vector3(0.9999995, 0.99999315, 0.9999994)
bones/30/position = Vector3(-0.017298942, 0.1298581, 0.07397927)
bones/30/rotation = Quaternion(-0.40880495, 0.552465, 0.3573281, 0.6324378)
bones/31/position = Vector3(-0.014143573, 0.18760014, -0.013976678)
bones/31/rotation = Quaternion(-0.32977057, -0.4744349, 0.6314249, 0.5171706)
bones/31/scale = Vector3(1.0114818, 0.977428, 1.011481)
bones/32/rotation = Quaternion(0.20882814, -0.0409847, 0.008553494, 0.9770557)
bones/32/scale = Vector3(1.0000376, 0.9943829, 1.0059397)
bones/33/rotation = Quaternion(0.13602069, 0.2554619, 0.0059540393, 0.95718455)
bones/33/scale = Vector3(0.98882896, 1.0206977, 0.99094796)
bones/34/rotation = Quaternion(0.091427565, -0.665697, 0.15584514, 0.72401726)
bones/35/rotation = Quaternion(0.37043503, 0.2109151, 0.20146227, 0.8818763)
bones/35/scale = Vector3(0.99999994, 0.99999845, 1.0000001)
bones/36/rotation = Quaternion(0.043822482, -0.00012428261, 0.030384485, 0.9985772)
bones/36/scale = Vector3(0.9999997, 1.000002, 1.0000001)
bones/37/rotation = Quaternion(0.10640487, -0.64231306, 0.1896725, 0.7349397)
bones/37/scale = Vector3(0.99999934, 0.99999624, 1.0000005)
bones/38/rotation = Quaternion(0.47156057, 0.18507154, 0.280458, 0.8153051)
bones/38/scale = Vector3(1.0000019, 1.0000006, 1.0000023)
bones/39/rotation = Quaternion(0.0519926, 0.025702633, 0.020911735, 0.99809766)
bones/39/scale = Vector3(0.99999964, 0.99999934, 0.9999999)
bones/40/rotation = Quaternion(-0.20291862, 0.81466585, -0.19211729, -0.50816786)
bones/40/scale = Vector3(1.0000001, 1.000003, 1)
bones/41/rotation = Quaternion(0.5630394, -0.06401997, -0.21021585, 0.7966791)
bones/41/scale = Vector3(0.9999998, 0.99999344, 0.9999977)
bones/42/rotation = Quaternion(0.06944673, 0.08872296, -0.04896128, 0.9924254)
bones/42/scale = Vector3(0.99999994, 1.0000068, 0.9999997)
bones/43/rotation = Quaternion(0.15121971, -0.71432984, 0.20768471, 0.6509475)
bones/44/rotation = Quaternion(0.57018954, 0.09513409, 0.11736191, 0.80750215)
bones/44/scale = Vector3(0.9999995, 0.9999994, 0.99999964)
bones/45/rotation = Quaternion(0.12009823, 0.08399621, -0.0066377902, 0.98917997)
bones/45/scale = Vector3(0.9999997, 0.99999946, 0.99999994)
bones/47/rotation = Quaternion(-0.18147981, -0.51764005, -0.30325922, 0.7791969)
bones/48/rotation = Quaternion(0.23821762, 0.31112885, 0.04466117, 0.9189433)
bones/48/scale = Vector3(0.9999994, 0.9999857, 0.9999992)
bones/49/rotation = Quaternion(0.11060442, -0.093579516, 0.082192585, 0.9860293)
bones/49/scale = Vector3(0.9999999, 1.0000105, 1.0000004)
bones/53/position = Vector3(0.11201809, -0.0045596007, -0.040472608)
bones/53/rotation = Quaternion(3.6455187e-08, 0.6969361, 0.71713334, -6.749148e-08)
bones/54/position = Vector3(-0.11201592, -0.004559793, -0.0404726)
bones/54/rotation = Quaternion(3.6455187e-08, 0.6969361, 0.71713334, -6.749148e-08)
bones/55/rotation = Quaternion(0.18472643, 0.78956556, 0.32215586, -0.48854688)
bones/57/position = Vector3(0.11756164, -0.033628043, 0.03517904)
bones/57/rotation = Quaternion(0.93367606, 0.19810048, 0.0502343, 0.29407784)
bones/57/scale = Vector3(1.0499436, 0.9071275, 1.0499434)
bones/58/rotation = Quaternion(0.23546977, -0.15300867, 0.034094878, 0.9591558)
bones/58/scale = Vector3(0.9993199, 0.9741149, 1.0346273)
bones/59/rotation = Quaternion(-0.5434575, -0.10610531, 0.10470822, 0.8260943)
bones/59/scale = Vector3(0.9662281, 0.97554725, 1.0693867)
bones/60/rotation = Quaternion(0.00012445734, 0.9746069, -0.22392245, -0.0005231539)
bones/60/scale = Vector3(0.9993706, 1.0008999, 0.99973094)
bones/61/position = Vector3(-0.11923273, -0.032544367, 0.03393863)
bones/61/rotation = Quaternion(0.9656505, -0.20920482, -0.043044362, 0.14798579)
bones/61/scale = Vector3(1.0364227, 0.9309506, 1.0364221)
bones/62/rotation = Quaternion(0.25505492, 0.18802616, -0.04747452, 0.94728)
bones/62/scale = Vector3(0.9992318, 0.97704107, 1.0287182)
bones/63/rotation = Quaternion(-0.6376203, 0.13392723, -0.1700269, 0.73932046)
bones/63/scale = Vector3(0.9855764, 0.9669991, 1.0529768)
bones/64/rotation = Quaternion(-0.00037590135, 0.97457427, -0.22406399, -0.0004087436)
bones/64/scale = Vector3(0.99965906, 1.0004861, 0.99985427)

[node name="BoneAttachment3D" type="BoneAttachment3D" parent="Armature/Skeleton3D" index="0"]
transform = Transform3D(0.9798229, -0.19715486, -0.032814294, 0.1636989, 0.88582027, -0.43419427, 0.114671335, 0.42006177, 0.900221, -0.0975822, 1.4390861, 0.13588704)
bone_name = "DEF-spine.005"
bone_idx = 5

[node name="Fire_white" parent="Armature/Skeleton3D/BoneAttachment3D" index="0" instance=ExtResource("3_1vbol")]
transform = Transform3D(0.9968041, 0.026470788, 0.07537454, -0.04138431, 0.9781408, 0.20378529, -0.06833245, -0.2062529, 0.9761105, 0.014351491, 0.07728994, -0.029583871)

[node name="HandBone" type="BoneAttachment3D" parent="Armature/Skeleton3D" index="1"]
unique_name_in_owner = true
transform = Transform3D(-0.7529857, -0.3985478, -0.53113365, 0.14517778, -0.87623376, 0.44262636, -0.6404391, 0.2961712, 0.71563417, -0.42628995, 0.81182766, -0.06798914)
bone_name = "DEF-hand.R"
bone_idx = 33

[node name="HandPivot" type="Node3D" parent="Armature/Skeleton3D/HandBone" index="0"]
unique_name_in_owner = true
transform = Transform3D(0.9589318, -0.28340772, -0.011390547, 0.044571467, 0.1902278, -0.9807277, 0.28011256, 0.9399433, 0.19504741, -0.020831823, 0.08700991, -0.018785834)

[node name="AnimationPlayer" type="AnimationPlayer" parent="." index="1"]
unique_name_in_owner = true
libraries = {
&"charAnim": SubResource("AnimationLibrary_l7pr1")
}

[node name="AnimationTree" type="AnimationTree" parent="." index="2"]
unique_name_in_owner = true
root_node = NodePath("%AnimationTree/..")
tree_root = SubResource("AnimationNodeBlendTree_ho3jx")
anim_player = NodePath("../AnimationPlayer")
parameters/Speed/scale = 1.0
parameters/WalkBlend/blend_position = Vector2(0, 0)
parameters/RunBlend/blend_amount = 0.0
parameters/StartAttack/blend_amount = 0.0
parameters/attackTimed1/seek_request = -1.0
parameters/attackTimed2/seek_request = -1.0
parameters/ComboBlend/blend_amount = 1.0
parameters/WeaponBlend/blend_amount = 0.0

[node name="CollisionWorld" type="CollisionShape3D" parent="." index="3"]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
shape = SubResource("CapsuleShape3D_jip51")

[node name="SpringArm3D" type="SpringArm3D" parent="." index="4"]
unique_name_in_owner = true
transform = Transform3D(0.99999994, 0, 0, 0, 1, 0, 0, 0, 0.99999994, 0, 1.2582402, -0.20610142)
collision_mask = 4
shape = SubResource("SphereShape3D_p4sl1")
spring_length = 5.0
script = ExtResource("4_jip51")

[node name="Camera3D" type="Camera3D" parent="SpringArm3D" index="0"]

[node name="StairBelowRayCast3D" type="RayCast3D" parent="." index="5"]
unique_name_in_owner = true
target_position = Vector3(0, -0.75, 0)
collision_mask = 4

[node name="MeshInstance3D" type="MeshInstance3D" parent="StairBelowRayCast3D" index="0"]
transform = Transform3D(0.1, 0, 0, 0, 0.1, 0, 0, 0, 0.1, 0, -0.75, 0)
mesh = SubResource("BoxMesh_ho3jx")

[node name="StairAheadRayCast3D" type="RayCast3D" parent="." index="6"]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.55, -0.76322514)
target_position = Vector3(0, -0.55, 0)
collision_mask = 4

[node name="MeshInstance3D" type="MeshInstance3D" parent="StairAheadRayCast3D" index="0"]
transform = Transform3D(0.1, 0, 0, 0, 0.1, 0, 0, 0, 0.1, 0, 0, 0)
mesh = SubResource("BoxMesh_6qntj")

[connection signal="animation_finished" from="AnimationTree" to="." method="_on_animation_tree_animation_finished"]
